"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdateminimal_vue_webpack"]("main",{

/***/ "./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-auto-import!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./frontend_app/pages/course/SingleCourse.vue?vue&type=script&lang=js":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-auto-import!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./frontend_app/pages/course/SingleCourse.vue?vue&type=script&lang=js ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var _lib_cookieManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/cookieManager */ \"./frontend_app/lib/cookieManager.js\");\n/* harmony import */ var _components_CourseInfoCard_vue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/CourseInfoCard.vue */ \"./frontend_app/pages/course/components/CourseInfoCard.vue\");\n/* harmony import */ var _components_ModifyCourseDialog_vue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/ModifyCourseDialog.vue */ \"./frontend_app/pages/course/components/ModifyCourseDialog.vue\");\n/* harmony import */ var _components_ManagePeopleCard_vue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/ManagePeopleCard.vue */ \"./frontend_app/pages/course/components/ManagePeopleCard.vue\");\n/* harmony import */ var _components_CreateAttendanceEventDialog_vue__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/CreateAttendanceEventDialog.vue */ \"./frontend_app/pages/course/components/CreateAttendanceEventDialog.vue\");\n/* harmony import */ var _components_ModifyAttendanceEventDialog_vue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/ModifyAttendanceEventDialog.vue */ \"./frontend_app/pages/course/components/ModifyAttendanceEventDialog.vue\");\n/* harmony import */ var _components_AttendanceEventCard_vue__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/AttendanceEventCard.vue */ \"./frontend_app/pages/course/components/AttendanceEventCard.vue\");\n/* harmony import */ var _components_LocationCard_vue__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./components/LocationCard.vue */ \"./frontend_app/pages/course/components/LocationCard.vue\");\n/* harmony import */ var element_plus__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! element-plus */ \"./node_modules/element-plus/es/components/message/index.mjs\");\n/* harmony import */ var element_plus_es__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! element-plus/es */ \"./node_modules/element-plus/es/components/message-box/index.mjs\");\n/* harmony import */ var element_plus_es_components_base_style_css__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! element-plus/es/components/base/style/css */ \"./node_modules/element-plus/es/components/base/style/css.mjs\");\n/* harmony import */ var element_plus_es_components_message_box_style_css__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! element-plus/es/components/message-box/style/css */ \"./node_modules/element-plus/es/components/message-box/style/css.mjs\");\n/* unplugin-vue-components disabled */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  name: 'SingleCourse',\n  components: { CourseInfoCard: _components_CourseInfoCard_vue__WEBPACK_IMPORTED_MODULE_1__[\"default\"], ModifyCourseDialog: _components_ModifyCourseDialog_vue__WEBPACK_IMPORTED_MODULE_2__[\"default\"], ManagePeopleCard: _components_ManagePeopleCard_vue__WEBPACK_IMPORTED_MODULE_3__[\"default\"], CreateAttendanceEventDialog: _components_CreateAttendanceEventDialog_vue__WEBPACK_IMPORTED_MODULE_4__[\"default\"], AttendanceEventCard: _components_AttendanceEventCard_vue__WEBPACK_IMPORTED_MODULE_6__[\"default\"], ModifyAttendanceEventDialog: _components_ModifyAttendanceEventDialog_vue__WEBPACK_IMPORTED_MODULE_5__[\"default\"], LocationCard: _components_LocationCard_vue__WEBPACK_IMPORTED_MODULE_7__[\"default\"] },\n  data() {\n    return {\n      course: {\n      },\n      courseForm: {\n      },\n      attendanceEventForm: {},\n      createAttendanceEventForm: {\n        name: '',\n        location_id: '',\n        start_at: '',\n        end_at: '',\n      },\n      attendanceEvents: [],\n      locations: [],\n      optionLocation: '',\n      account: {\n        roles: [],\n        credential: ''\n      },\n      selectableRoles: [],\n      currentRole: '',\n      selectRole: '',\n      showModifyCourseDialog: false,\n      showCreateAttendanceEventDialog: false,\n      showModifyAttendanceEventDialog: false,\n      isAddedValue: false,\n      enrollments: [],\n      currentEventID: '',\n      activeTab: 'events'\n    };\n  },\n  computed: {\n    tabStyle() {\n      if (window.innerWidth < 992) {\n        return \"top\"\n      }\n      return \"left\"\n    }\n  },\n  created() {\n    this.course.id = this.$route.params.id;\n    this.account = _lib_cookieManager__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getAccount()\n    if (this.account) {\n      this.fetchCourse(this.course.id);\n    }\n  },\n  watch: {\n    currentRole(newRole) {\n      if(newRole == 'owner' || newRole == 'instructor' || newRole == 'staff') {\n        this.fetchAttendanceEvents(this.course.id);\n        this.fetchLocations();\n        this.fetchEnrollments();\n      }\n    }\n  },\n  methods: {\n    changeRole(role) {\n      element_plus_es__WEBPACK_IMPORTED_MODULE_10__.ElMessageBox.confirm(\n        'page will change to '+role+' view. Continue?',\n        'Warning',\n        {\n          confirmButtonText: 'OK',\n          cancelButtonText: 'Cancel',\n          type: 'warning',\n        }\n      )\n        .then(() => {\n          this.currentRole = role\n          ;(0,element_plus__WEBPACK_IMPORTED_MODULE_11__.ElMessage)({\n            type: 'success',\n            message: 'Change to '+role+' view',\n          })\n        })\n        .catch(() => {\n          this.selectRole = this.currentRole\n          ;(0,element_plus__WEBPACK_IMPORTED_MODULE_11__.ElMessage)({\n            type: 'info',\n            message: 'Change canceled',\n          })\n        })\n    },\n    changeTab(tab_name) {\n      if (tab_name == 'people') {\n        this.fetchEnrollments()\n      }\n    },\n    changeRoute(route) {\n      this.$router.push({ path: route })\n    },\n    fetchCourse(id) {\n      axios__WEBPACK_IMPORTED_MODULE_12__[\"default\"].get(`/api/course/${id}`, {\n        headers: {\n          Authorization: `Bearer ${this.account.credential}`,\n        },\n      }).then(response => {\n        this.course = response.data.data;\n        // Copying the course object to courseForm\n        this.courseForm = { ...this.course };\n        this.selectableRoles = this.course.enroll_identity\n        this.selectRole = this.selectableRoles[0]\n        this.currentRole = this.selectRole\n        // Deleting the id and enroll_identity keys from courseForm\n        delete this.courseForm.id;\n        delete this.courseForm.enroll_identity;\n      }).catch(error => {\n        console.error('Error fetching course:', error);\n      });\n    },\n    updateCourse(form) {\n      this.courseForm = form\n      if (this.courseForm.repeat == 'no-repeat') {\n        this.courseForm.occurrence = 1\n      }\n      axios__WEBPACK_IMPORTED_MODULE_12__[\"default\"].put('/api/course/' + this.course.id, this.courseForm, {\n        headers: {\n          Authorization: `Bearer ${this.account.credential}`,\n        },\n      }).then(() => {\n        this.showModifyCourseDialog = false;\n        this.fetchCourse(this.course.id);\n      }).catch(error => {\n        console.error('Error creating course:', error);\n      });\n    },\n    fetchEnrollments() {\n      axios__WEBPACK_IMPORTED_MODULE_12__[\"default\"].get(`/api/course/${this.course.id}/enroll`, {\n        headers: {\n          Authorization: `Bearer ${this.account.credential}`,\n        }\n      }).then(response => {\n        this.enrollments = response.data.data;\n        this.enrollments.forEach((enrollment) => {\n          enrollment.enrolls = response.data.data.enroll_identity\n        });\n\n      }).catch(error => {\n        console.error('Error fetching enrollments:', error);\n      });\n    },\n\n    addEnrollments(newEnrolls) {\n      axios__WEBPACK_IMPORTED_MODULE_12__[\"default\"].post(`/api/course/${this.course.id}/enroll`, { enroll: newEnrolls }, {\n        headers: {\n          Authorization: `Bearer ${this.account.credential}`,\n        }\n      }).then(response => {\n        this.fetchEnrollments()\n      }).catch(error => {\n        console.error('Error fetching enrollments:', error);\n        element_plus__WEBPACK_IMPORTED_MODULE_11__.ElMessage.error(error.message)\n      });\n    },\n\n    updateEnrollment(enrollment) {\n      let entollList = {\n        enroll: {\n          email: enrollment.account.email,\n          roles: enrollment.enroll_identity.join(',')\n        }\n      }\n      axios__WEBPACK_IMPORTED_MODULE_12__[\"default\"].post(`/api/course/${this.course.id}/enroll/${enrollment.account.id}`, entollList, {\n        headers: {\n          Authorization: `Bearer ${this.account.credential}`,\n        }\n      }).then(response => {\n        this.fetchEnrollments()\n      }).catch(error => {\n        console.error('Error fetching enrollments:', error);\n        element_plus__WEBPACK_IMPORTED_MODULE_11__.ElMessage.error(error.message)\n      });\n    },\n\n    deleteEnrollments(enrollment) {\n      axios__WEBPACK_IMPORTED_MODULE_12__[\"default\"].delete(`/api/course/${this.course.id}/enroll/${enrollment}`, {\n        headers: {\n          Authorization: `Bearer ${this.account.credential}`,\n        }\n      }).then(response => {\n        this.fetchEnrollments()\n      }).catch(error => {\n        console.error('Error fetching enrollments:', error);\n      });\n    },\n    createAttendanceEvent(eventForm) {\n      console.log(eventForm)\n      axios__WEBPACK_IMPORTED_MODULE_12__[\"default\"].post(`/api/course/${this.course.id}/event`, eventForm, {\n        headers: {\n          Authorization: `Bearer ${this.account.credential}`,\n        },\n      }).then(() => {\n        this.showCreateAttendanceEventDialog = false\n        this.createAttendanceEventForm = {}\n        this.fetchAttendanceEvents() // Refresh the list after adding\n      }).catch(error => {\n        console.error('Error creating attendance event:', error);\n      });\n    },\n    fetchAttendanceEvents() {\n      axios__WEBPACK_IMPORTED_MODULE_12__[\"default\"].get(`/api/course/${this.course.id}/event`, {\n        headers: {\n          Authorization: `Bearer ${this.account.credential}`,\n        },\n      }).then(response => {\n        this.attendanceEvents = response.data.data;\n      }).catch(error => {\n        console.error('Error fetching attendance events:', error);\n      });\n    },\n    fetchLocations() {\n      axios__WEBPACK_IMPORTED_MODULE_12__[\"default\"].get(`/api/course/${this.course.id}/location`, {\n        headers: {\n          Authorization: `Bearer ${this.account.credential}`,\n        },\n      }).then(response => {\n        this.locations = response.data.data\n      }).catch(error => {\n        console.error('Error fetching locations:', error);\n      });\n    },\n    createNewLocation(locationData) {\n      let courseId = this.$route.params.id;\n      axios__WEBPACK_IMPORTED_MODULE_12__[\"default\"].post(`/api/course/${courseId}/location`, locationData, {\n        headers: {\n          Authorization: `Bearer ${this.account.credential}`,\n        }\n      })\n        .then(response => {\n          // alert('Location created successfully', response);\n          (0,element_plus__WEBPACK_IMPORTED_MODULE_11__.ElMessage)({\n            type: 'success',\n            message: 'Location created successfully'\n          })\n          this.fetchLocations();\n        })\n        .catch(error => {\n          console.error('Error creating location', error);\n          (0,element_plus__WEBPACK_IMPORTED_MODULE_11__.ElMessage)({\n            type: 'error',\n            message: 'Error creating location'\n          })\n        });\n    },\n    updateLocation(id, locationData) {\n      let courseId = this.$route.params.id;\n      axios__WEBPACK_IMPORTED_MODULE_12__[\"default\"].put(`/api/course/${courseId}/location/${id}`, locationData, {\n        headers: {\n          Authorization: `Bearer ${this.account.credential}`,\n        }\n      })\n        .then(response => {\n          (0,element_plus__WEBPACK_IMPORTED_MODULE_11__.ElMessage)({\n            type: 'success',\n            message: 'Location updated successfully'\n          })\n          this.fetchLocations();\n        })\n        .catch(error => {\n          console.error('Error updating location', error);\n          (0,element_plus__WEBPACK_IMPORTED_MODULE_11__.ElMessage)({\n            type: 'error',\n            message: error,\n          })\n        });\n    },\n    deleteLocation(locationId) {\n      axios__WEBPACK_IMPORTED_MODULE_12__[\"default\"].delete(`/api/course/${this.course.id}/location/${locationId}`, {\n        headers: {\n          Authorization: `Bearer ${this.account.credential}`,\n        }\n      }).then(() => {\n        console.log(`Location ${locationId} deleted successfully.`);\n        // Refresh the locations list\n        this.fetchLocations();\n      }).catch(error => {\n        console.error('Error deleting location:', error.message);\n        (0,element_plus__WEBPACK_IMPORTED_MODULE_11__.ElMessage)({\n            type: 'error',\n            message: error,\n          })\n      });\n    },\n    deleteAttendanceEvent(eventId) {\n      axios__WEBPACK_IMPORTED_MODULE_12__[\"default\"].delete(`/api/course/${this.course.id}/event/${eventId}`, {\n        headers: {\n          Authorization: `Bearer ${this.account.credential}`,\n        }\n      }).then(() => {\n        console.log(`Event ${eventId} deleted successfully.`);\n        // Refresh the attendance events list\n        this.fetchAttendanceEvents(this.course.id);\n      }).catch(error => {\n        console.error('Error deleting attendance event:', error);\n      });\n    },\n    editAttendanceEvent(eventId) {\n      const event = this.attendanceEvents.find(e => e.id === eventId);\n      if (event) {\n        // Assuming `event` is already a reactive object, you might directly assign it\n        // Or use a spread operator for a shallow copy if modifications should not reflect back immediately\n        this.attendanceEventForm = { ...event };\n        delete this.attendanceEventForm.id;\n        this.showModifyAttendanceEventDialog = true;\n        this.createAttendanceEventForm = this.attendanceEventForm;\n        this.currentEventID = eventId;\n      } else {\n        console.error('Event not found!');\n      }\n    },\n\n    updateAttendanceEvent() {\n      axios__WEBPACK_IMPORTED_MODULE_12__[\"default\"].put(`/api/course/${this.course.id}/event/${this.currentEventID}`, this.attendanceEventForm, {\n        headers: {\n          Authorization: `Bearer ${this.account.credential}`,\n        },\n      }).then(() => {\n        this.showModifyAttendanceEventDialog = false;\n        this.fetchAttendanceEvents(); // Refresh the list after adding\n      }).catch(error => {\n        console.error('Error modifying attendance event:', error);\n      });\n    },\n    onConfirm() {\n      if (this.optionLocation) {\n        this.locations.push({\n          label: this.optionLocation,\n          value: this.optionLocation,\n        })\n        this.clear()\n      }\n    },\n    clear() {\n      this.optionLocation = ''\n      this.isAddedValue = false\n    }\n  },\n});\n\n\n//# sourceURL=webpack://minimal-vue-webpack/./frontend_app/pages/course/SingleCourse.vue?./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-auto-import!./node_modules/vue-loader/dist/index.js??ruleSet%5B1%5D.rules%5B6%5D.use%5B0%5D");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("f2739518d5c88f30d28d")
/******/ })();
/******/ 
/******/ }
);